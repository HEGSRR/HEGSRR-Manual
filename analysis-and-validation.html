<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Analysis and Validation | HEGSRR Manual</title>
<meta name="author" content="Peter Kedron">
<meta name="author" content="Joseph Holler">
<meta name="description" content="7.1 Changes to the pre-analysis plan registration Researchers will likely encounter the need to deviate from the registered pre-analysis plan. save a version of the text file used to write and...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 7 Analysis and Validation | HEGSRR Manual">
<meta property="og:type" content="book">
<meta property="og:description" content="7.1 Changes to the pre-analysis plan registration Researchers will likely encounter the need to deviate from the registered pre-analysis plan. save a version of the text file used to write and...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Analysis and Validation | HEGSRR Manual">
<meta name="twitter:description" content="7.1 Changes to the pre-analysis plan registration Researchers will likely encounter the need to deviate from the registered pre-analysis plan. save a version of the text file used to write and...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Roboto-0.4.7/font.css" rel="stylesheet">
<link href="libs/Fira_Code-0.4.7/font.css" rel="stylesheet">
<link href="libs/Roboto_Slab-0.4.7/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">HEGSRR Manual</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="" href="reproducible-research-compendia-and-workflows.html"><span class="header-section-number">2</span> Reproducible research compendia and workflows</a></li>
<li><a class="" href="provocation.html"><span class="header-section-number">3</span> Provocation</a></li>
<li><a class="" href="ideation-and-research-design.html"><span class="header-section-number">4</span> Ideation and Research Design</a></li>
<li><a class="" href="writing-an-analysis-plan-for-preregistration.html"><span class="header-section-number">5</span> Writing an Analysis Plan for Preregistration</a></li>
<li><a class="" href="data-observation-and-curation.html"><span class="header-section-number">6</span> Data Observation and Curation</a></li>
<li><a class="active" href="analysis-and-validation.html"><span class="header-section-number">7</span> Analysis and Validation</a></li>
<li><a class="" href="dissemination.html"><span class="header-section-number">8</span> Dissemination</a></li>
<li><a class="" href="preservation.html"><span class="header-section-number">9</span> Preservation</a></li>
<li><a class="" href="reproduction.html"><span class="header-section-number">10</span> Reproduction</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/HEGSRR/HEGSRR-Manual">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="analysis-and-validation" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Analysis and Validation<a class="anchor" aria-label="anchor" href="#analysis-and-validation"><i class="fas fa-link"></i></a>
</h1>
<div id="changes-to-the-pre-analysis-plan-registration" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Changes to the pre-analysis plan registration<a class="anchor" aria-label="anchor" href="#changes-to-the-pre-analysis-plan-registration"><i class="fas fa-link"></i></a>
</h2>
<p>Researchers will likely encounter the need to deviate from the registered pre-analysis plan.</p>
<ul>
<li>save a version of the text file used to write and register the pre-analysis plan</li>
<li>major changes to the plan may require updating that document, rendering a new PDF and updating the registration on OSF.</li>
</ul>
<p>QUESTION: when is a change to the registered pre-analysis plan big enough to require an update on OSF?
- if an uncertainty or ambiguity and contingencies for that were already articulated in the pre-analysis plan, there is no need to update the plan.
- if alterations to the pre-analysis plan may ultimately impact the interpretation of claims made by the research, the changes should be registered on OSF.</p>
<ul>
<li><h2 id="in-parallel-all-changes-minor-and-major-should-be-identified-with-bold-text-or-subheadings-in-the-narrative-of-the-analytical-plan-as-research-progresses.-our-suggested-labels-for-changes-include">in parallel, all changes (minor and major) should be identified with bold text or subheadings in the narrative of the analytical plan as research progresses. Our suggested labels for changes include:</h2></li>
<li>update the preanalysis plan</li>
</ul>
</div>
<div id="coding-and-code-style" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Coding and Code style<a class="anchor" aria-label="anchor" href="#coding-and-code-style"><i class="fas fa-link"></i></a>
</h2>
<p>R should follow Tidyverse style: <a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a> and there are two great addins:
- stylr formats your code for you <a href="https://styler.r-lib.org/" class="uri">https://styler.r-lib.org/</a>
- lintr checks your code formatting: <a href="https://github.com/jimhester/lintr" class="uri">https://github.com/jimhester/lintr</a></p>
<p>Python should follow PEP 8 Style: <a href="https://www.python.org/dev/peps/pep-0008/" class="uri">https://www.python.org/dev/peps/pep-0008/</a></p>
</div>
<div id="intermediary-outputs" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Intermediary outputs<a class="anchor" aria-label="anchor" href="#intermediary-outputs"><i class="fas fa-link"></i></a>
</h2>
<p>It is possible, but unwise, to encode the entire workflow in a computational notebook without saving intermediary results.
When should intermediary results be saved, how, and why?
There are at least five major situations in which saving data results is paramount for increasing the reproducibility of your study:</p>
<ol style="list-style-type: decimal">
<li>Immediately following code to download or create data that can be redistributed, the data should be saved in the <code>raw\public</code> folder.</li>
<li>As soon as confidential, proprietary, or very large data sources has been processed enough to redistribute, the data should be saved to the <code>derived\public</code> folder.</li>
<li>After very computationally intensive processes, results should be saved to the <code>derived\public</code> folder.</li>
<li>If any external software or process is used to manipulate the data, then the data should be saved to the <code>derived\public</code> folder just <strong>prior</strong> to the external process <em>and</em> just <strong>after</strong> the external process. Any process outside of the main computational notebook should be documented in notebook narrative and/or separate <code>procedure</code> <code>code</code> or <code>protocol</code> files.</li>
<li>If any randomization or stochastic model is applied in the analysis, the results of the random aspect of the analysis should be saved to the <code>derived\public</code> folder.</li>
</ol>
<p>The computational notebook should include code both to save and to (re)load intermediary data files, and the recommended practice is to:
1. save in formats with open standards without encoding the data object name
2. read in with functions that assign a data object name</p>
<p>Recommended open standard file types include <code>.csv</code>, <code>.json</code> and <code>.gpkg</code>.
For example, while working in R, it is best to use the <code>.RDS</code> file type to store individual data objects without the data object name rather than relying on <code>.RData</code> files potentially encompassing multiple data objects and encoding their names.
Saving data files agnostic to the object name in R or Python adds clarity to the provenance of data as it is manipulated by the research workflow and allows researchers to modify the code and compare results of replications or reanalyses.</p>
<p>Researchers can encode data saving and loading procedures in separate code blocks and modify the code chunk options for optimal reproducibiliy.
For example, it is not necessary to query an API every time a computational notebook is run: the code chunk for an API query can be set to <code>eval = FALSE</code> while the code chunk to load the resulting data can be set to <code>eval = TRUE</code>.</p>
<p>See RMarkdown code chunk options: <a href="https://rpubs.com/Lingling912/870659" class="uri">https://rpubs.com/Lingling912/870659</a> and Jupyter code block options</p>
</div>
<div id="function-parameters" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Function parameters<a class="anchor" aria-label="anchor" href="#function-parameters"><i class="fas fa-link"></i></a>
</h2>
<p>While it may be convenient to use the default parameters for functions while coding the script for a research project, this practice makes it more difficult for other researchers to understand the code and may be vulnerable to changes in the required packages over time.
If a parameter is important, best practice is to include it in the function call.
As an example, functions for classifying continuous data for the purpose of choropleth mapping may contain a default number of classes, but it is helpful to choose and declare that default explicitly in the research code rather than requiring others to look up function defaults.
The result of declaring parameters will be more intentional research design and more legible code.</p>
</div>
<div id="store-publication-ready-outputs-in-the-results-directory" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Store publication-ready outputs in the results directory<a class="anchor" aria-label="anchor" href="#store-publication-ready-outputs-in-the-results-directory"><i class="fas fa-link"></i></a>
</h2>
<p>Store publication-ready final research outputs, e.g. figures, tables, or other media for publications and presentations in the <code>results</code> directory.</p>
<p>Although these types of results will ideally be embedded as outputs in computational notebooks, most researchers will also find it convenient to share and repurpose individual figures and tables for blogs, web designs, presentations, and more.
Therefore, it makes sense to add a final block of code to computational studies to output important results to separate files.
As you do so, complete the <code>results_metadata.csv</code> file indexing each results file, including the fields:</p>
<ul>
<li>
<code>path</code>: the path from results folder, e.g., <code>figures</code>, <code>other</code>, or <code>tables</code>
</li>
<li>
<code>name</code>: the file name</li>
<li>
<code>description</code>: very brief description or figure title</li>
</ul>
<p>Wise researchers may even edit this <code>results_metadata.csv</code> file in their computational notebook!</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-observation-and-curation.html"><span class="header-section-number">6</span> Data Observation and Curation</a></div>
<div class="next"><a href="dissemination.html"><span class="header-section-number">8</span> Dissemination</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#analysis-and-validation"><span class="header-section-number">7</span> Analysis and Validation</a></li>
<li><a class="nav-link" href="#changes-to-the-pre-analysis-plan-registration"><span class="header-section-number">7.1</span> Changes to the pre-analysis plan registration</a></li>
<li><a class="nav-link" href="#coding-and-code-style"><span class="header-section-number">7.2</span> Coding and Code style</a></li>
<li><a class="nav-link" href="#intermediary-outputs"><span class="header-section-number">7.3</span> Intermediary outputs</a></li>
<li><a class="nav-link" href="#function-parameters"><span class="header-section-number">7.4</span> Function parameters</a></li>
<li><a class="nav-link" href="#store-publication-ready-outputs-in-the-results-directory"><span class="header-section-number">7.5</span> Store publication-ready outputs in the results directory</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/HEGSRR/HEGSRR-Manual/blob/main/04-analysis-validation.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/HEGSRR/HEGSRR-Manual/edit/main/04-analysis-validation.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>HEGSRR Manual</strong>" was written by Peter Kedron, Joseph Holler. It was last built on 2023-07-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
